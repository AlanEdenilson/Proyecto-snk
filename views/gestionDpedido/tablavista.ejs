<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/stylesheet/gestionDpedido/tabla.css">
    <title>Document</title>
</head>
<body>
    <div class="conteiner1">

    <div class="profile-image-container">
        <div class="profile-image">
            <img id="imagen" src="https://www.meriggi.cl/16159-thickbox_default/polar-color-negro.jpg" alt="Imagen de Perfil" style="width: 100%; height: auto;">
        </div>
    </div>
    <h2 class="tienda">Tienda: ever culon</h2>
    <h2 class="nombre">Nombre: ever</h2>
    <h2 class="direccion">Direccion: calle a santa ana casa grande</h2>

<style>
    .pedido-line {
        position: absolute;
        top: 218px;
        left: 35px;
        width: 750px;
        height: 2px;
        background-color: rgb(107, 71, 4);
    }
</style>
<div class="pedido-line"></div>
<h2 class="pedido">Pedido #1</h2>

    <table id="tabla">
        <thead>
            <tr>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>subtotal</th>
            </tr>
        </thead>
    </table>
    </div>
    <i class='bx bx-log-out'></i>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

    <script>
        
        $(function(){

            const fila = '<%= typeof id !== "undefined" ? id : "" %>';
            console.log('el id es igual : '+fila)

            $.ajax({
    url: '/gestion/detalles?id=' + fila,
    type: 'GET',
    success: function(response) {
        console.log('Detalles cargados para el pedido:', fila);
        console.log(response);

        response.forEach(function(item) {
            $('#imagen').attr('src',item.tienda_imagen)
            $('.nombre').text('Nombre: ' + item.cliente_nombre);
            $('.tienda').text('Tienda: ' + item.tienda_nombre);
            $('.pedido').text('Pedido # ' + item.id)

        var html = `
            <tr>
                    <td><img src="${item.producto_imagen}" alt="Producto 1" width="50" height="50"></td>
                    <td>${item.producto_nombre}</td>
                    <td>${item.cantidad_total}</td>
                    <td>${item.producto_precio}</td>
                    <td>${item.subtotal_total}</td>
                </tr>
        `;
        $('#tabla').append(html);

    });
       

},
    error: function(xhr, status, error) {
        console.error('Error al cargar los detalles:', error);
    }
  }
)

        })
        
    </script>
</body>
</html>